[build]
  # ビルドコマンド
  command = "npm run build"
  
  # ビルド後の公開ディレクトリ
  publish = "dist"

  functions = "netlify/functions"

# SPAルーティング対応
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# 環境変数の設定
[build.environment]
  NODE_VERSION = "18"
  # 本番のクライアントは必ず Netlify Functions のプロキシを使う
  VITE_API_BASE_PREFIX = "/.netlify/functions/proxy"
  VITE_API_PATH_PREFIX = "/api"
  VITE_ALLOW_DIRECT_BACKEND = "false"